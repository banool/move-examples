This is the complete code used for this Stack Overflow post: todo
